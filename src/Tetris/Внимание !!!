Этот код был взят и осознан с журнала Яндекс для программистов.